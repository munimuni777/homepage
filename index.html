<!DOCTYPE html>
<html lang="ja">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8088CR0PXF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-8088CR0PXF');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>むにむに</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #fafafa;
        }
        
        header {
            background-color: #2c3e50;
            color: white;
            padding: 40px 0;
            text-align: center;
            position: relative;
        }
        
        .header-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .header-banner {
            width: 100%;
            max-height: 220px;
            object-fit: cover;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 40px;
            font-size: 0.95rem;
            color: #555;
        }
        
        .platforms {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(330px, 1fr));
            gap: 25px;
        }
        
        .platform-card {
            background: white;
            border-radius: 5px;
            border: 1px solid #eee;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .platform-header {
            padding: 12px;
            color: white;
            font-size: 0.9rem;
        }
        
        .platform-content {
            padding: 15px;
        }
        
        .platform-content h3 {
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .platform-content p {
            margin-bottom: 12px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 比率 */
            height: 0;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .btn {
            display: inline-block;
            padding: 6px 15px;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 3px;
            font-size: 0.85rem;
            margin-top: 10px;
        }
        
        .niconico {
            background-color: #252525;
        }
        
        .youtube {
            background-color: #FF0000;
        }
        
        .cluster {
            background-color: #7B68EE;
        }
        
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            font-size: 0.8rem;
        }
        
        .comments-section {
            margin-top: 50px;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .comments-section h2 {
            margin-bottom: 20px;
            color: #2c3e50;
            font-size: 1.4rem;
            text-align: center;
        }
        
        /* Cusdisのコメント欄のスタイル調整 */
        #cusdis_thread {
            margin: 0 auto;
            max-width: 850px;
            padding: 10px 0;
            min-height: 600px; /* 最小高さを設定 */
        }
        
        /* iframeの高さ調整 - 非常に重要 */
        #cusdis_thread iframe {
            width: 100% !important;
            min-height: 600px !important; 
            border: none !important;
        }
        
        @media (max-width: 768px) {
            .platforms {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            /* モバイルでのiframe高さ調整 */
            #cusdis_thread iframe {
                min-height: 700px !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <img src="https://yt3.googleusercontent.com/A1NzGbimTFeb5mkf0KOnFGtO7XfcwhV8EhaAcBDo4pa8EgNqWJxrIVyHj-zaqBkRHkl7zAYm=w1707-fcrop64=1,00005a57ffffa5a8-k-c0xffffffff-no-nd-rj" class="header-banner">
        <div class="header-content">
            <h1>むにむに</h1>
        </div>
    </header>
    
    <div class="container">
        <div class="intro">
            <p>物理や機械工学、複雑系などに関するコンテンツを配信しています。</p>
        </div>
        <div class="platforms">
            <!-- ニコニコ動画 むにむに -->
            <div class="platform-card">
                <div class="platform-header niconico">ニコニコ動画</div>
                <div class="platform-content">
                    <h3>むにむに(統合)</h3>
                    <p>物理・機械工学・複雑系を扱う統合チャンネル。新作はこちら。</p>
                    <div class="video-container">
                        <iframe src="https://embed.nicovideo.jp/watch/sm40464327" frameborder="0" allow="autoplay" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.nicovideo.jp/user/1414218/video" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>
            
            <!-- ニコニコ動画 むにむに別館 -->
            <div class="platform-card">
                <div class="platform-header niconico">ニコニコ動画</div>
                <div class="platform-content">
                    <h3>むにむに別館(旧)</h3>
                    <p>統合前の機械工学テーマのコンテンツ。</p>
                    <div class="video-container">
                        <iframe src="https://embed.nicovideo.jp/watch/sm35173271" frameborder="0" allow="autoplay" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.nicovideo.jp/user/25371352/video" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>
            
            <!-- ニコニコ動画 むにらぼ -->
            <div class="platform-card">
                <div class="platform-header niconico">ニコニコ動画</div>
                <div class="platform-content">
                    <h3>むにらぼ(旧)</h3>
                    <p>統合前の複雑系テーマのコンテンツ。</p>
                    <div class="video-container">
                        <iframe src="https://embed.nicovideo.jp/watch/sm35835597" frameborder="0" allow="autoplay" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.nicovideo.jp/user/21857547/video" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>       

            <!-- YouTube むにむに -->
            <div class="platform-card">
                <div class="platform-header youtube">YouTube</div>
                <div class="platform-content">
                    <h3>むにむに本館</h3>
                    <p>主に物理学をテーマにしたコンテンツ。</p>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/PBtewzvP_tI?si=8Ql3Z_j_nxvYPd5R" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.youtube.com/c/munimuni777/videos" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>
            
           <!-- YouTube むにむに別館 -->
            <div class="platform-card">
                <div class="platform-header youtube">YouTube</div>
                <div class="platform-content">
                    <h3>むにむに別館</h3>
                    <p>主に機械工学をテーマにしたコンテンツ。</p>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/pPbhg32_JtU?si=MUmpAfwl1h0Q3GrA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.youtube.com/c/munimunibekkan/videos" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>
            
            <!-- YouTube むにらぼ -->
            <div class="platform-card">
                <div class="platform-header youtube">YouTube</div>
                <div class="platform-content">
                    <h3>むにらぼ</h3>
                    <p>主に複雑系をテーマにしたコンテンツ。</p>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/M5XIrnO48nc?si=LJWlag6RAEw7xpjr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <a href="https://www.youtube.com/c/munilab/videos" target="_blank" class="btn">チャンネルを見る</a>
                </div>
            </div>        
            
            <!-- Cluster -->
            <div class="platform-card">
                <div class="platform-header cluster">cluster</div>
                <div class="platform-content">
                    <h3>むにむに</h3>
                    <p>VR空間でのワールド制作</p>
                    <div class="video-container">
                        <img src="https://cluster-file-storage.imgix.net/uploads/group_b08a77f7e0000f5f1ffea672c5/bc9c03c2-769d-4f15-bb81-f4621d46828a/e10e21c7-8ff5-4ecc-8629-1d1f4c42b88e.jpg" style="width:100%; height:100%; object-fit:cover; position:absolute; top:0; left:0;">
                    </div>
                    <a href="https://cluster.mu/u/munimuni777/worlds" target="_blank" class="btn">ワールドを見る</a>
                </div>
            </div>
        </div>
        
        <div class="comments-section">
            <h2>コメント</h2>

            <!-- Cusdis コメントシステム -->
            <div id="cusdis_thread"
              data-host="https://cusdis.com"
              data-app-id="c6710792-e5e9-4444-b20c-a0df98f7a333"
              data-page-id="munimuni-homepage"
              data-page-url="https://www.munimuni.net/"
              data-page-title="むにむにのホームページ"
            ></div>
            
            <!-- 先にカスタムスクリプトを配置 -->
            <script>
              // Cusdisの初期化前に実行されるように、グローバル変数でオプションを設定
              window.CUSDIS_LOCALE = {
                "powered_by": "Powered by Cusdis",
                "post_comment": "コメントする",
                "loading": "読み込み中...",
                "email": "メールアドレス (任意)",
                "nickname": "ニックネーム",
                "reply_placeholder": "返信...",
                "reply_btn": "返信",
                "sending": "送信中...",
                "mod_badge": "モデレーター",
                "content_is_required": "コメント内容を入力してください",
                "nickname_is_required": "ニックネームを入力してください",
                "comment_has_been_sent": "コメントが送信されました。自動承認が有効になっています。"
              };
              
              // Cusdisの設定をオーバーライドするための準備
              window.CUSDIS = window.CUSDIS || {};
              window.CUSDIS_PARAMS = {
                approve: "all", // 全てのコメントを自動承認
              };
            </script>
            
            <!-- 次にCusdisのスクリプトを読み込む -->
            <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
            
            <script>
              document.addEventListener('DOMContentLoaded', function() {
                // オリジナルのaddCommentメソッドをオーバーライド
                const originalCusdisInit = window.renderCusdis;
                if (originalCusdisInit) {
                  window.renderCusdis = function(...args) {
                    // オリジナルの初期化を実行
                    const result = originalCusdisInit.apply(this, args);
                    
                    // iframeが読み込まれるのを待つ
                    setTimeout(function checkAndFixCusdis() {
                      const iframe = document.querySelector('#cusdis_thread iframe');
                      if (iframe) {
                        fixCusdisIframe(iframe);
                      } else {
                        // まだ読み込まれていない場合は再試行
                        setTimeout(checkAndFixCusdis, 200);
                      }
                    }, 500);
                    
                    return result;
                  };
                }
                
                // 既にCusdisが読み込まれている場合の対応
                setTimeout(function() {
                  const iframe = document.querySelector('#cusdis_thread iframe');
                  if (iframe) {
                    fixCusdisIframe(iframe);
                  }
                }, 1000);
                
                function fixCusdisIframe(iframe) {
                  // iframeの高さを大きく設定
                  iframe.style.minHeight = '600px';
                  iframe.style.height = '600px';
                  
                  // クロスオリジンの制約があるため、postMessageを使用してiframe内のスクリプトと通信
                  try {
                    // iframeのロードイベントを監視
                    iframe.addEventListener('load', function() {
                      // iframeの内部スタイルを修正
                      const message = {
                        type: 'cusdis-style-fix',
                        styles: `
                          body, html { height: auto !important; overflow: visible !important; }
                          .comment-list { max-height: none !important; overflow: visible !important; }
                          .comment-item { height: auto !important; }
                          button { background-color: #3498db !important; color: white !important; }
                          .captcha-container { margin-top: 10px; }
                        `
                      };
                      // iframeにメッセージを送信
                      iframe.contentWindow.postMessage(message, '*');
                      
                      // 自動承認のハックメッセージ
                      iframe.contentWindow.postMessage({
                        type: 'cusdis-auto-approve',
                        enabled: true
                      }, '*');
                    });
                  } catch (e) {
                    console.error('Cusdis iframe 処理エラー:', e);
                  }
                }
                
                // メッセージを受信するリスナー（デバッグ用）
                window.addEventListener('message', function(event) {
                  if (event.data && event.data.type === 'cusdis-debug') {
                    console.log('Cusdis Debug:', event.data);
                  }
                });
              });
              
              // Cusdisのスクリプトの直後に実行されるコード
              setTimeout(function() {
                // Cusdisオブジェクトをモンキーパッチする
                if (window.CUSDIS) {
                  const originalAddComment = window.CUSDIS.addComment;
                  if (originalAddComment) {
                    window.CUSDIS.addComment = function(comment) {
                      // コメントを自動承認する
                      if (comment) {
                        comment.approved = true;
                      }
                      return originalAddComment.call(this, comment);
                    };
                  }
                }
              }, 2000);
            </script>
            
            <!-- iframeと親ウィンドウの通信を可能にするスクリプト -->
            <script>
              // iframe側で実行されるコードを注入
              document.addEventListener('DOMContentLoaded', function() {
                setTimeout(function injectIframeScript() {
                  const iframe = document.querySelector('#cusdis_thread iframe');
                  if (iframe) {
                    try {
                      const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                      if (!iframeDoc) {
                        setTimeout(injectIframeScript, 500);
                        return;
                      }
                      
                      // スクリプトの注入
                      const script = iframeDoc.createElement('script');
                      script.textContent = `
                        // メッセージ受信ハンドラ
                        window.addEventListener('message', function(event) {
                          try {
                            const data = event.data;
                            
                            // スタイル適用
                            if (data.type === 'cusdis-style-fix' && data.styles) {
                              const style = document.createElement('style');
                              style.textContent = data.styles;
                              document.head.appendChild(style);
                            }
                            
                            // 自動承認ハック
                            if (data.type === 'cusdis-auto-approve' && data.enabled) {
                              if (window.CUSDIS) {
                                const originalAddComment = window.CUSDIS.addComment;
                                window.CUSDIS.addComment = function(comment) {
                                  comment.approved = true;
                                  return originalAddComment(comment);
                                };
                              }
                              
                              // フォーム送信をハック
                              document.addEventListener('submit', function(e) {
                                // デバッグ情報を親ウィンドウに送信
                                window.parent.postMessage({
                                  type: 'cusdis-debug',
                                  event: 'form-submitted'
                                }, '*');
                              });
                            }
                          } catch (e) {
                            console.error('メッセージ処理エラー:', e);
                          }
                        });
                        
                        // CSDSの承認ステータスをオーバーライド
                        if (window.CUSDIS_DATA && window.CUSDIS_DATA.appId) {
                          window.CUSDIS_DATA.autoApprove = true;
                        }
                      `;
                      
                      // スクリプトを挿入
                      iframeDoc.body.appendChild(script);
                    } catch (e) {
                      console.error('iframe script注入エラー:', e);
                      // 再試行
                      setTimeout(injectIframeScript, 500);
                    }
                  } else {
                    // iframeがまだ存在しないので再試行
                    setTimeout(injectIframeScript, 500);
                  }
                }, 1000);
              });
            </script>
        </div>
    </div>
    
    <footer>
        <p>&copy; むにむに All Rights Reserved.</p>
    </footer>
</body>
</html>
